using Microsoft.VisualStudio.TestTools.UnitTesting;
using log4net.Config;
using System;
using System.Collections.Generic;

namespace com.bellarosa.ia.neuronalnetwork.number.Tests
{
    [TestClass()]
    public class NumberMatchNeuronTests
    {
        #region Initializer / Cleanup
        [ClassInitialize]
        public static void classInitialize(TestContext testContext)
        {
            XmlConfigurator.Configure();
        }
        #endregion

        #region Tests
        [TestMethod()]
        public void processTestRecognize()
        {
            byte[] testBytetable = new byte[] {
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,0, 0,0,0,0,0, 0,0,0,0,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,0,0,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,0,0,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,0,0, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255 };
            NumberMatchNeuron numberMatchNeuron = new NumberMatchNeuron(1);
            numberMatchNeuron.init();
            float neuronResult = (float)numberMatchNeuron.process(new Dictionary<int, object> { { 1, testBytetable } });
            Assert.AreEqual(1, neuronResult, "Test recognize");
        }

        [TestMethod()]
        public void processTestNotRecognized()
        {
            byte[] testBytetable = new byte[] {
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,0, 0,0,0,0,0, 0,0,0,0,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,0, 0,0,0,0,0, 0,0,0,0,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,0, 0,0,0,0,0, 0,0,0,0,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,0, 0,0,0,0,0, 0,0,0,0,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,0,0,255, 255,255,255,255,255, 255,255,255,255,0, 0,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,0, 0,0,0,0,0, 0,0,0,0,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,0, 0,0,0,0,0, 0,0,0,0,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,
                255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255,255,255, 255,255,255 };
            NumberMatchNeuron numberMatchNeuron = new NumberMatchNeuron(8);
            numberMatchNeuron.init();
            float neuronResult = (float)numberMatchNeuron.process(new Dictionary<int, object> { { 1, testBytetable } });
            Assert.AreEqual(0.9872449f, neuronResult, "Test not recognized");
        }

        [TestMethod()]
        [ExpectedException(typeof(ArgumentException))]
        public void processTestArgumentNull()
        {
            NumberMatchNeuron numberMatchNeuron = new NumberMatchNeuron(2);
            numberMatchNeuron.init();
            numberMatchNeuron.process(null);
        }

        [TestMethod()]
        [ExpectedException(typeof(ArgumentException))]
        public void processTestArgumentDataNull()
        {
            byte[] nullByteArray = null;
            NumberMatchNeuron numberMatchNeuron = new NumberMatchNeuron(2);
            numberMatchNeuron.init();
            numberMatchNeuron.process(new Dictionary<int, object> { { 1, nullByteArray } });
        }
        #endregion
    }
}